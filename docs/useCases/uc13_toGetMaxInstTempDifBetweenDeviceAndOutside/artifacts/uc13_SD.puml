@startuml
!pragma layout smetana

participant " " as User
participant Controller as ":GetMaxInstantaneousTempDifBetweenRoomAndOutsideCTRL"

participant "logService : LogService" as LogService
participant "logRepository : LogRepository" as LogRepository

autonumber

ref over User, Controller: getDevicesByRoomAndTemperatureFunctionality

User -> Controller: getMaxInstTempDiffBetweenDeviceAndOutside (outsideDeviceDTO, insideDeviceDTO, initialTime, endTime)

activate Controller

Controller -> LogService: getDeviceReadingsByTimePeriod (outsideDeviceID, datePeriod)

activate LogService

LogService -> LogRepository: findByDeviceIDAndTimePeriod (outsideDeviceID, datePeriod)

activate LogRepository

LogRepository --> LogService: outsideTemperatureReadings

deactivate LogRepository

LogService --> Controller: outsideTemperatureReadings

deactivate LogService

Controller -> LogService: getDeviceReadingsByTimePeriod (insideDeviceID, sensorTypeID, datePeriod)

activate LogService

LogService -> LogRepository: findByDeviceIDAndSensorTypeAndTimePeriod (insideDeviceID, sensorTypeID, datePeriod)

activate LogRepository

LogRepository --> LogService: deviceTemperatureReadings

deactivate LogRepository

LogService --> Controller: deviceTemperatureReadings

deactivate LogService

Controller -> Controller: getTempDiffBetweenDeviceAndOutside (outsideTemperatureReadings, deviceTemperatureReadings)

Controller --> User: maxInstantaneousTempDiff

deactivate Controller


@enduml