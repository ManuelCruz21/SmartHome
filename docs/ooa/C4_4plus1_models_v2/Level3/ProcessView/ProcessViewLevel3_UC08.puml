@startuml
'https://plantuml.com/sequence-diagram
!pragma layout smetana

autonumber

actor "User" as User
participant "RestClient" as RC
box "Smart Home"
    participant "Controller" as CTRL
        participant "Service" as SV
        participant "Repository" as REPO
        participant "Domain" as DOM
        participant "DataBase" as BD
end box



User -> RC : I want to deactivate a device
activate RC

RC -> CTRL : requestAllDevices()
activate CTRL
CTRL -> SV : getAllDevices()
activate SV
SV -> REPO : findAll()
activate REPO
REPO -> BD : SELECT * FROM devices
activate BD
BD --> REPO : deviceList
deactivate BD
REPO --> SV : deviceList
deactivate REPO
SV --> CTRL : deviceList
CTRL --> RC : deviceList
deactivate SV
deactivate CTRL

RC -> CTRL : requestDeactivateDevice(requestDeactivateDevice(deviceDTO))
activate CTRL
CTRL -> DOM : DeviceID(deviceID: String)
activate DOM
DOM --> CTRL : deviceID
deactivate DOM
CTRL -> SV : deactivateDeviceByID(deviceID)
activate SV
SV -> DOM : deactivateDevice(): Status
activate DOM
DOM --> SV : status
deactivate DOM
SV --> CTRL : device
deactivate SV
CTRL --> RC : deviceDTO
deactivate CTRL
RC --> User : deviceDTO
deactivate RC

@enduml