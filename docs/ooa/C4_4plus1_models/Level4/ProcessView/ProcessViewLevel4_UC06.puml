@startuml
'https://plantuml.com/sequence-diagram
!pragma layout smetana

autonumber

actor "User" as User
participant "RestClient" as RC

box "SmartHome"
    participant "Controller" as CTRL
    participant "Service" as SV
    participant "Repository" as REPO
    participant "Domain" as DOM
    participant "DataBase" as BD
end box

User o-> RC : I want to get a list of all devices in a room

activate RC

RC -> CTRL : getDevicesInAGivenRoom(idStr)
activate CTRL

CTRL -> DOM : RoomID(idStr)
activate DOM
DOM -> CTRL : roomID
deactivate DOM

CTRL -> SV : getDevicesByRoomId(roomID)
activate SV

SV -> REPO : findByRoomID(roomId)
activate REPO
REPO -> BD : find
activate BD
deactivate BD
REPO -> SV : List<Device>
deactivate REPO

SV -> CTRL : List<Device>
deactivate SV


CTRL --> RC : List<DeviceDTO>
deactivate CTRL

RC --> User : List<DeviceDTO>
deactivate RC


@enduml