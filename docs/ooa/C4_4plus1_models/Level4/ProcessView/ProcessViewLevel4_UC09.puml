@startuml
'https://plantuml.com/sequence-diagram
!pragma layout smetana

autonumber

actor "User" as User
participant "RestClient" as RC

box "SmartHome"
    participant "Controller" as CTRL
    participant "Service" as SV
    participant "Repository" as REPO
    participant "Domain" as DOM
    participant "DataBase" as BD
end box


User -> RC : I want to get all devices grouped by functionality
activate RC


RC -> CTRL: getAllDevicesGroupedByFunctionality(strTypeDescription)
activate CTRL

CTRL -> DOM : TypeDescription(strTypeDescription)
activate DOM

DOM -> CTRL : typeDescription
deactivate DOM

CTRL -> SV: getAllDevices()
activate SV

SV -> REPO : findAll()
activate REPO

REPO -> BD : find

REPO --> SV : List<Device>
deactivate BD

SV --> CTRL : List<Device>
deactivate REPO

CTRL -> CTRL : groupDevicesByFunctionality(List<Device>, strTypeDescription)

SV --> RC : List<DeviceDTO>
deactivate SV

RC --> User : List<DeviceDTO>
deactivate RC


@enduml