@startuml
'https://plantuml.com/sequence-diagram
!pragma layout smetana

autonumber

actor "User" as User
participant "RestClient" as RC
box "Smart Home"
    participant "Controller" as CTRL
        participant "Service" as SV
        participant "Repository" as REPO
        participant "Domain" as DOM
        participant "DataBase" as BD
end box



User -> RC : I want to deactivate a device
activate RC

RC -> CTRL : getAllDevices()
activate CTRL

CTRL -> SV : getAllDevices()
activate SV

SV -> REPO : findAll()
activate REPO

REPO -> BD : find
activate BD

BD --> REPO : deviceDataModelList
deactivate BD

REPO --> SV : deviceList
deactivate REPO

SV --> CTRL : deviceList
deactivate SV

CTRL --> RC : deviceList

RC -> CTRL : deactivateDevice(deviceDTO)

CTRL -> DOM : DeviceID(strDeviceID)
activate DOM
DOM --> CTRL : deviceID
deactivate DOM

CTRL -> SV : deactivateDeviceByID(deviceID)
activate SV

SV -> DOM : deactivateDevice(): Status
activate DOM

DOM --> SV : status
deactivate DOM

SV --> CTRL : device
deactivate SV

CTRL --> RC : deviceDTO
deactivate CTRL

RC --> User : deviceDTO
deactivate RC

@enduml