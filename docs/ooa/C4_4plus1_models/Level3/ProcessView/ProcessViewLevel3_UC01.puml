@startuml
'https://plantuml.com/sequence-diagram
!pragma layout smetana

autonumber

actor "User" as User
participant "RestClient" as RC

box "SmartHome"
    participant "Controller" as CTRL
    participant "Service" as SV
    participant "Repository" as REPO
    participant "Domain" as DOM
    participant "DataBase" as BD
end box

User -> RC : I want to configure the house location
activate RC

RC -> CTRL : configureHouseLocation(houseDataDTO)
activate CTRL



CTRL -> DOM : createAddress(street, doorNumber, postalCode, countryCode, postalCodeFactory)
activate DOM
DOM --> CTRL : address

CTRL -> DOM : createGPS(latitude, longitude)
DOM --> CTRL : gps
deactivate DOM

CTRL -> SV : addHouse(address, gps)
activate SV

SV -> REPO : save(house)
activate REPO
REPO -> BD : save
activate BD
deactivate BD
REPO --> SV : house
deactivate REPO

SV --> CTRL : house
deactivate SV


CTRL --> RC : houseDTO
deactivate CTRL

RC --> User : houseDTO
deactivate RC


@enduml